# 提示词设计原则

在 Amrita 框架中，提示词（Prompt）是引导大型语言模型（LLM）行为的关键因素。良好的提示词设计能够显著提升模型的响应质量和任务执行效率。本文档将详细介绍在 Amrita 框架中设计和使用提示词的最佳实践。

## 1. 提示词基础概念

提示词是提供给语言模型的初始文本输入，用于设定对话的背景、角色和任务目标。在 Amrita 框架中，提示词分为群聊提示词和私聊提示词两种类型，分别用于不同的对话场景。

### 1.1 提示词的作用

1. **设定角色**: 定义模型在对话中扮演的角色
2. **提供上下文**: 给模型提供必要的背景信息
3. **明确任务**: 清楚地说明模型需要完成的任务
4. **规范输出**: 指导模型按照特定格式或风格进行回复

### 1.2 Amrita 中的提示词管理

Amrita 框架提供了完善的提示词管理系统：

1. **分类管理**: 群聊提示词和私聊提示词分别管理
2. **预设机制**: 支持多种提示词预设，可根据需要切换
3. **动态配置**: 支持运行时动态修改和设置提示词
4. **持久化存储**: 提示词可保存到文件中，便于复用

## 2. 提示词设计原则

### 2.1 明确性原则

提示词应当清晰明确，避免歧义。好的提示词应该让模型准确理解用户期望的回复内容和格式。

示例：

```text
你是一个专业的技术文档编写助手。请根据用户提供的信息，生成格式规范、内容准确的技术文档。文档应包括以下部分：
1. 功能概述
2. 使用方法
3. 注意事项
4. 示例代码
```

### 2.2 完整性原则

提示词应包含完成任务所需的所有关键信息，包括角色设定、任务目标、输出格式要求等。

示例：

```text
角色：你是一位经验丰富的软件工程师
任务：回答用户关于Python编程的问题
要求：
1. 回答应准确且易于理解
2. 提供具体的代码示例
3. 解释代码的工作原理
4. 指出可能遇到的常见问题及解决方案
```

### 2.3 结构化原则

良好的提示词应该具有清晰的结构，便于模型理解和执行。

示例：

```text
# 角色定义
你是一个精通中英文翻译的专家

# 任务说明
将用户提供的中文内容翻译成英文，或英文内容翻译成中文

# 输出要求
1. 保持原文的核心意思不变
2. 注意语言的自然流畅性
3. 专业术语需要准确翻译
4. 回复格式：直接输出翻译结果，无需额外说明
```

## 3. Amrita 提示词类型

### 3.1 群聊提示词

群聊提示词用于群组聊天场景，通常需要考虑多人交互和群组特定的规则。

特点：

- 需要处理多人同时对话的情况
- 可能需要遵守群组特定的交流规则
- 回复应考虑到群组成员的不同背景

### 3.2 私聊提示词

私聊提示词用于一对一的私人对话场景，可以提供更加个性化和深入的服务。

特点：

- 可以提供更加个性化的服务
- 能够进行更深入的对话
- 可以更好地保护用户隐私

## 4. 提示词设计最佳实践

### 4.1 角色设定

为模型设定清晰的角色有助于提供更加一致和专业的回复。

```text
你是一个专业的客服代表，你的职责是：
1. 耐心倾听用户的问题
2. 准确理解用户的需求
3. 提供准确、有用的解决方案
4. 保持礼貌和专业的态度
```

### 4.2 任务描述

明确描述需要模型完成的具体任务。

```text
任务：帮助用户解决Amrita框架使用中的问题
要求：
1. 准确理解用户遇到的问题
2. 提供详细的解决方案
3. 如果需要，提供相关代码示例
4. 引导用户查阅相关文档
```

### 4.3 输出格式规范

明确规定期望的输出格式，有助于获得结构化的回复。

```text
回复格式要求：
1. 使用清晰的标题分隔不同部分
2. 重要信息使用项目符号列出
3. 代码示例应包含在代码块中
4. 复杂概念应提供简单易懂的解释
```

### 4.4 限制和约束

设定适当的限制和约束，防止模型产生不当或危险的回复。

```text
安全约束：
1. 不得提供任何可能危害系统安全的建议
2. 不得泄露用户隐私信息
3. 不得生成违法不良信息
4. 遇到敏感问题应引导用户寻求专业帮助
```

## 5. Amrita 提示词管理功能

### 5.1 提示词预设

Amrita 支持创建和管理多个提示词预设，便于在不同场景下快速切换。

管理命令：

```shell
/presets           # 列出所有读取到的模型预设
/prompts           # 展示当前的prompt预设
/choose_prompt     # 设置群聊/私聊的全局提示词预设
```

### 5.2 动态提示词设置

用户可以在对话过程中动态调整提示词的 extra 部分。

命令：

```shell
/prompt --(show)   # 展示当前提示词的extra部分
/prompt --(clear)  # 清空当前prompt的extra部分
/prompt --(set) [文字]  # 设置提示词的extra部分
```

### 5.3 自定义提示词

用户可以创建自定义提示词文件，保存在对应的提示词目录中：

- 群聊提示词目录：`config/group_prompts/`
- 私聊提示词目录：`config/private_prompts/`

## 6. 提示词优化技巧

### 6.1 迭代优化

提示词设计是一个迭代过程，需要根据实际使用效果不断优化。

步骤：

1. 设计初始版本的提示词
2. 在实际使用中观察效果
3. 根据问题反馈调整提示词
4. 重复优化直到达到满意效果

### 6.2 A/B 测试

可以创建多个版本的提示词进行对比测试，选择效果最好的版本。

### 6.3 用户反馈收集

积极收集用户对模型回复的反馈，作为优化提示词的重要依据。

## 7. 常见问题和解决方案

### 7.1 提示词过长

问题：提示词过长可能导致模型忽略部分信息或响应变慢。

解决方案：

1. 精简提示词内容，保留核心信息
2. 将复杂的提示词分解为多个部分
3. 使用示例代替冗长的说明

### 7.2 回复不一致

问题：模型回复风格或内容不一致。

解决方案：

1. 在提示词中明确定义回复风格
2. 提供具体的回复示例
3. 增加对回复一致性的约束条件

### 7.3 回复不准确

问题：模型回复内容不准确或不符合预期。

解决方案：

1. 在提示词中强调准确性的重要性
2. 提供权威的信息来源
3. 增加事实核查的要求

## 8. 总结

良好的提示词设计是发挥大型语言模型潜力的关键。在 Amrita 框架中，通过合理设计和管理提示词，可以显著提升模型的表现和用户体验。设计提示词时应遵循明确性、完整性、结构化等原则，并根据实际使用效果不断优化。

通过充分利用 Amrita 提供的提示词管理功能，开发者和用户可以创建出更加高效和个性化的对话体验。
